# This file configures the laratest app which serves public web traffic.
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: laratest-gke-cli
spec:
  replicas: 1
  selector:
    matchLabels:
      app: laratest-cli
  template:
    metadata:
      labels:
        app: laratest-cli
    spec:
      containers:
      - name: laratest-cli
        image: superchairon/laratest_php-cli:latest
        imagePullPolicy: "Always"
        args:
        - /bin/sh
        - -c
        - php artisan queue:work --tries=3
        envFrom:
          - configMapRef:
              name: special-config
